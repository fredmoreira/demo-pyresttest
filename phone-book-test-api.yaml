---
- config:
    - testset: "Basic tests from Phone-Book API"

- test: # Test api phone-book up
    - name: "Basic get request"
    - group: "GET Requests"
    - method: "GET"
    - url: "/"
    - expected_status: [200]
    - validators:
      - compare: {raw_body: "", comparator: contains, expected: '! :) :) API PHONE-BOOK UP :) :) !' }

- test: # Test 404
    - name: "Basic request 404"
    - group: "GET Requests"
    - method: "GET"
    - url: "/test321"
    - expected_status: [404]

- test: # create full contact
    - name: "Create full contact"
    - group: "POST Requests"
    - method: "POST"
    - url: "/contacts"
    - headers: {Content-Type: application/json}
    - body: '{"name": "testpyrest", "mobilephone": "0313199998888", "homephone": "0313133334444"}'
    - expected_status: [201]
    - validators:
      - compare: {jsonpath_mini: "name", comparator: "eq", expected: "testpyrest"}
      - compare: {jsonpath_mini: "mobilephone", comparator: "eq", expected: "0313199998888"}
      - compare: {jsonpath_mini: "homephone", comparator: "eq", expected: "0313133334444"}

- test: # create contact without homephone
    - name: "Create contact"
    - group: "POST Requests"
    - method: "POST"
    - url: "/contacts"
    - headers: {Content-Type: application/json}
    - body: '{"name": "tester", "mobilephone": "0314788889999"}'
    - expected_status: [201]
    - validators:
      - compare: {jsonpath_mini: "name", comparator: "eq", expected: "tester"}
      - compare: {jsonpath_mini: "mobilephone", comparator: "eq", expected: "0314788889999"}

- test: # error create contact
    - name: "error create contact "
    - group: "POST Requests"
    - method: "POST"
    - url: "/contacts"
    - headers: {Content-Type: application/json}
    - body: '{"name": "tester"}'
    - expected_status: [400]
    - validators:
      - compare: {raw_body: "", comparator: contains, expected: 'Missing required property: mobilephone' }
